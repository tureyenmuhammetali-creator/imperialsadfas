@model Region
@{
    ViewData["Title"] = "Yeni Bölge Ekle";
    Layout = "_AdminLayout";
}
<style>
/* Bölge formu - sayfa içi stil (önbellek bağımsız) */
.region-form-card { background: #161b22; border: 1px solid #30363d; border-radius: 10px; margin-bottom: 25px; }
.region-form-card .card-body { padding: 28px 32px; }
.region-form-header { display: flex; flex-direction: column; gap: 6px; padding: 20px 25px; border-bottom: 1px solid #30363d; }
.region-form-header h3 { font-size: 18px; font-weight: 600; color: #f0f6fc; margin: 0; display: flex; align-items: center; gap: 10px; }
.region-form-header h3 i { color: #c9a962; }
.region-form-header .card-subtitle { font-size: 13px; color: #8b949e; margin: 0; }
.region-form .validation-summary { list-style: none; padding: 14px 18px; margin-bottom: 24px; background: rgba(218,54,51,0.1); border: 1px solid rgba(218,54,51,0.3); border-radius: 8px; color: #da3633; font-size: 13px; }
.region-form .validation-summary ul { margin: 0; padding: 0; list-style: none; }
.region-form-section { background: #21262d; border: 1px solid #30363d; border-radius: 10px; padding: 22px; margin-bottom: 28px; }
.region-form-section-full { grid-column: 1 / -1; margin-bottom: 28px; }
.region-form-section .section-title { display: flex; align-items: center; gap: 10px; font-size: 15px; font-weight: 600; color: #c9a962; margin: 0 0 18px 0; padding-bottom: 12px; border-bottom: 1px solid #30363d; }
.section-fields .form-group, .section-grid .form-group { margin-bottom: 18px; }
.region-form-section .form-label { display: block; font-size: 13px; font-weight: 500; color: #8b949e; margin-bottom: 8px; }
.region-form-section .form-control { width: 100%; padding: 12px 14px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; color: #f0f6fc; font-size: 14px; box-sizing: border-box; }
.region-form-section .form-control:focus { outline: none; border-color: #c9a962; box-shadow: 0 0 0 3px rgba(201,169,98,0.2); }
.region-form-section textarea.form-control { resize: vertical; min-height: 100px; }
.region-form-info { display: flex; align-items: flex-start; gap: 10px; padding: 12px 16px; margin-bottom: 20px; background: rgba(56,139,253,0.1); border: 1px solid rgba(56,139,253,0.25); border-radius: 8px; font-size: 13px; color: #c9d1d9; }
.region-form-info i { color: #388bfd; font-size: 18px; flex-shrink: 0; }
.section-grid { display: grid; gap: 20px; }
.section-grid-3 { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
.section-grid .input-group { display: flex; }
.section-grid .input-group .form-control { border-radius: 8px 0 0 8px; }
.section-grid .input-group-text { padding: 12px 14px; background: #30363d; border: 1px solid #30363d; border-left: none; border-radius: 0 8px 8px 0; color: #8b949e; font-size: 13px; }
.file-upload-input { position: absolute; width: 0.1px; height: 0.1px; opacity: 0; overflow: hidden; z-index: -1; }
.file-upload-label { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; padding: 28px 24px; background: #21262d; border: 2px dashed #30363d; border-radius: 10px; cursor: pointer; transition: all 0.2s; }
.file-upload-label:hover { border-color: #c9a962; background: rgba(201,169,98,0.08); }
.file-upload-label i { font-size: 32px; color: #c9a962; }
.file-upload-text { font-size: 14px; font-weight: 500; color: #c9d1d9; }
.file-upload-hint { font-size: 12px; color: #8b949e; }
.form-check-card { display: flex; align-items: center; gap: 12px; padding: 20px; background: #21262d; border: 1px solid #30363d; border-radius: 10px; margin-top: 8px; }
.form-check-card .form-check-input { width: 20px; height: 20px; accent-color: #c9a962; cursor: pointer; }
.form-check-card .form-check-label { font-size: 14px; color: #c9d1d9; cursor: pointer; margin: 0; }
.section-grid-image { grid-template-columns: 1fr auto; align-items: start; }
.form-actions-region { margin-top: 28px; padding-top: 24px; border-top: 1px solid #30363d; display: flex; gap: 12px; flex-wrap: wrap; }
.btn-save { padding: 12px 24px; font-size: 14px; font-weight: 600; background: #c9a962 !important; color: #0d1117 !important; border: none !important; border-radius: 6px; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; }
.btn-save:hover { background: #b8944d !important; color: #0d1117 !important; }
@@media (max-width: 900px) { .section-grid-3 { grid-template-columns: 1fr 1fr; } .section-grid-image { grid-template-columns: 1fr; } }
@@media (max-width: 600px) { .region-form-card .card-body { padding: 20px; } .section-grid-3 { grid-template-columns: 1fr; } .form-actions-region { flex-direction: column; } .form-actions-region .btn { width: 100%; justify-content: center; } }
</style>
<div class="admin-toolbar">
    <a asp-action="Regions" class="btn btn-outline">
        <i class="bi bi-arrow-left"></i> Bölgelere Dön
    </a>
</div>

<div class="admin-card region-form-card">
    <div class="card-header region-form-header">
        <h3><i class="bi bi-geo-alt-fill"></i> Yeni Bölge Ekle</h3>
        <p class="card-subtitle">Bölge bilgilerini aşağıdaki formu doldurarak ekleyebilirsiniz.</p>
    </div>
    <div class="card-body">
        <form asp-action="CreateRegion" method="post" enctype="multipart/form-data" class="region-form">
            @Html.AntiForgeryToken()
            <div asp-validation-summary="All" class="validation-summary"></div>

            <section class="region-form-section region-form-section-full">
                <h5 class="section-title"><i class="bi bi-geo-alt"></i> Bölge Bilgileri</h5>
                <div class="section-fields">
                    <div class="form-group">
                        <label asp-for="Name" class="form-label">Bölge adı</label>
                        <input asp-for="Name" class="form-control" placeholder="örn: Alanya, Kemer" />
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Description" class="form-label">Açıklama</label>
                        <textarea name="Description" class="form-control" rows="4" placeholder="Bölge hakkında kısa açıklama...">@Model?.Description</textarea>
                    </div>
                    <div class="form-group">
                        <label asp-for="StartPoint" class="form-label">Başlangıç noktası</label>
                        <input asp-for="StartPoint" class="form-control" placeholder="örn: Antalya Havalimanı" />
                    </div>
                </div>
            </section>

            <section class="region-form-section region-form-section-full">
                <h5 class="section-title"><i class="bi bi-currency-exchange"></i> Fiyat ve Mesafe</h5>
                <div class="region-form-info">
                    <i class="bi bi-info-circle"></i>
                    <span>Ana para birimi Euro (EUR). Sitede TL/USD/GBP otomatik dönüştürülür.</span>
                </div>
                <div class="section-grid section-grid-3">
                    <div class="form-group">
                        <label asp-for="Currency" class="form-label">Para Birimi (kayıt)</label>
                        <select asp-for="Currency" class="form-control">
                            <option value="EUR" selected>€ EUR (Euro)</option>
                            <option value="TRY">₺ TRY (Türk Lirası)</option>
                            <option value="USD">$ USD (Amerikan Doları)</option>
                            <option value="GBP">£ GBP (İngiliz Sterlini)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label asp-for="Price" class="form-label">Fiyat (EUR)</label>
                        <input asp-for="Price" class="form-control" type="number" step="0.01" min="0" placeholder="0" />
                        <span asp-validation-for="Price" class="text-danger"></span>
                    </div>
                </div>
            </section>

            <section class="region-form-section region-form-section-full">
                <h5 class="section-title"><i class="bi bi-image"></i> Görsel ve Durum</h5>
                <div class="section-grid section-grid-image">
                    <div class="form-group file-upload-group">
                        <label class="form-label">Bölge Görseli</label>
                        <p class="text-muted small mb-2">Görselin sitede görünmesi için mutlaka bir dosya seçip yükleyin (JPG, PNG, WebP - max 10MB).</p>
                        <div class="file-upload-box">
                            <input type="file" name="imageFile" id="regionImage" class="file-upload-input" accept=".jpg,.jpeg,.png,.webp" />
                            <label for="regionImage" class="file-upload-label">
                                <i class="bi bi-cloud-arrow-up"></i>
                                <span class="file-upload-text">Dosya Seç</span>
                                <span class="file-upload-hint">JPG, PNG veya WebP</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group form-group-check">
                        <div class="form-check-card">
                            <input asp-for="IsActiveBool" class="form-check-input" type="checkbox" />
                            <label asp-for="IsActiveBool" class="form-check-label"></label>
                        </div>
                    </div>
                </div>
            </section>

            <div class="form-actions form-actions-region">
                <button type="submit" class="btn btn-primary btn-save">
                    <i class="bi bi-check-lg"></i> Bölgeyi Kaydet
                </button>
                <a asp-action="Regions" class="btn btn-outline">İptal</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.getElementById('regionImage').addEventListener('change', function () {
            var label = this.nextElementSibling;
            var text = label.querySelector('.file-upload-text');
            text.textContent = this.files.length ? this.files[0].name : 'Dosya Seç';
        });
    </script>
}
