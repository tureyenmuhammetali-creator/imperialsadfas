@model HomeViewModel
@{
    ViewData["Title"] = "VIP Transferdienstleistungen";
    var currentLang = "de";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success" style="position: fixed; top: 100px; left: 50%; transform: translateX(-50%); z-index: 9999; max-width: 500px;">
        <i class="bi bi-check-circle-fill"></i>
        @TempData["Success"]
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger" style="position: fixed; top: 100px; left: 50%; transform: translateX(-50%); z-index: 9999; max-width: 500px;">
        <i class="bi bi-exclamation-circle-fill"></i>
        @TempData["Error"]
    </div>
}

<!-- Hero Section -->
<section class="hero">
    <div class="hero-slider" id="heroSlider">
        @if (Model.HeroSlides.Any())
        {
            var slideIndex = 0;
            foreach (var slide in Model.HeroSlides)
            {
                <div class="hero-slide @(slideIndex == 0 ? "active" : "")" data-index="@slideIndex" @(slideIndex > 0 ? "style='display:none;'" : "")>
                    @if (slideIndex == 0)
                    {
                        <img src="@slide.ImageUrl" 
                             alt="Imperial VIP Transfer" 
                             class="hero-slide-image" 
                             fetchpriority="high"
                             onerror="this.style.display='none'" />
                    }
                    else
                    {
                        <img data-src="@slide.ImageUrl" 
                             alt="Imperial VIP Transfer" 
                             class="hero-slide-image lazy-slide" 
                             onerror="this.style.display='none'" />
                    }
                    <div class="hero-slide-overlay"></div>
                </div>
                slideIndex++;
            }
        }
        else
        {
            <div class="hero-slide active">
                <div class="hero-slide-overlay"></div>
            </div>
        }
    </div>
    
    @if (Model.HeroSlides.Count() > 1)
    {
        <button class="hero-nav hero-nav-prev" id="heroPrev" aria-label="Zurück">
            <i class="bi bi-chevron-left"></i>
        </button>
        <button class="hero-nav hero-nav-next" id="heroNext" aria-label="Weiter">
            <i class="bi bi-chevron-right"></i>
        </button>
        
        <div class="hero-dots" id="heroDots">
            @for (int i = 0; i < Model.HeroSlides.Count(); i++)
            {
                <button class="hero-dot @(i == 0 ? "active" : "")" data-index="@i" aria-label="Slide @(i + 1)"></button>
            }
        </div>
        
        <div class="hero-slide-counter">
            <span class="current" id="slideCurrentNum">01</span>
            <span class="separator">/</span>
            <span class="total">@Model.HeroSlides.Count().ToString("D2")</span>
        </div>
    }
    
    <div class="hero-content container">
        <div class="hero-text">
            <span class="hero-badge">
                <i class="bi bi-star-fill"></i>
                @(Model.Settings.GetValueOrDefault("hero_badge", "Premium VIP Transferdienstleistungen"))
            </span>
            <h1 class="hero-title">
                @(Model.Settings.GetValueOrDefault("hero_title", "Luxus und Komfort"))<br/>
                <span>@(Model.Settings.GetValueOrDefault("hero_subtitle", "Transferdienstleistungen"))</span>
            </h1>
            <p class="hero-description">
                @(Model.Settings.GetValueOrDefault("hero_description", "VIP-Transfer vom Flughafen, Hotel und zwischen Städten. Premium-Fahrzeuge, professionelle Fahrer und ununterbrochene Kommunikation."))
            </p>
            <div class="hero-buttons">
                <a asp-controller="Reservation" asp-action="Index" asp-route-lang="@currentLang" class="btn btn-accent btn-lg">
                    <i class="bi bi-calendar-check"></i>
                    Jetzt buchen
                </a>
                <a asp-controller="Vehicle" asp-action="Index" asp-route-lang="@currentLang" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-car-front"></i>
                    Unsere Fahrzeuge
                </a>
            </div>
            
            <div class="hero-stats">
                <div class="hero-stat">
                    <span class="hero-stat-number">10+</span>
                    <span class="hero-stat-label">Jahre Erfahrung</span>
                </div>
                <div class="hero-stat">
                    <span class="hero-stat-number">5000+</span>
                    <span class="hero-stat-label">Zufriedene Kunden</span>
                </div>
                <div class="hero-stat">
                    <span class="hero-stat-number">15+</span>
                    <span class="hero-stat-label">VIP Fahrzeuge</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Reservation Section - Airport ↔ Region only (same logic as TR) -->
@{
    var allRegionsFormDe = Model.AllRegionsForForm ?? Model.Regions;
    const string airportValueDe = "Antalya Havalimanı";
}
<section class="quick-reservation-section" style="content-visibility: auto;">
    <div class="container">
        <div class="quick-reservation-header">
            <h2>Imperial VIP Transfer</h2>
            <p>Buchen Sie frühzeitig für eine sorgenfreie Reise und sichern Sie sich Komfort und Bequemlichkeit!</p>
        </div>
        
        <form asp-controller="Reservation" asp-action="Index" asp-route-lang="@currentLang" method="get" class="quick-reservation-form" id="quickReservationForm">
            <input type="hidden" name="regionId" id="quickFormRegionId" value="" />
            <div class="quick-form-grid">
                <div class="form-group">
                    <label>Abholort</label>
                    <select name="pickupLocation" id="pickupLocation" class="form-control" required>
                        <option value="">Region oder Flughafen wählen</option>
                        <option value="@airportValueDe">Flughafen Antalya</option>
                        @foreach (var region in allRegionsFormDe)
                        {
                            <option value="@region.Name" data-region-id="@region.Id">@region.Name</option>
                        }
                    </select>
                </div>
                <div class="form-group">
                    <label>Zielort</label>
                    <select name="dropoffLocation" id="dropoffLocation" class="form-control" required>
                        <option value="">Zuerst Abholort wählen</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Anzahl der Passagiere</label>
                    <input type="number" name="passengers" class="form-control" placeholder="Passagiere: 1" min="1" max="20" value="1" />
                </div>
                <div class="form-group form-submit">
                    <button type="submit" class="btn btn-accent btn-lg">
                        Zum Reservierungsformular
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

<!-- Regions Section -->
@if (Model.Regions.Any())
{
<section class="section regions-section-new" style="content-visibility: auto;">
    <div class="container">
        <div class="section-header">
            <span class="section-label-ghost">REGIONEN</span>
            <h2 class="section-title"><span class="text-accent">REGIONEN</span></h2>
        </div>

        <div class="regions-grid-new">
            @foreach (var region in Model.Regions)
            {
                <div class="region-card-new">
                    <div class="region-image-new">
                        @if (!string.IsNullOrEmpty(region.ImageUrl))
                        {
                            <img src="@region.ImageUrl" 
                                 alt="@region.Name VIP Transfer Region" 
                                 loading="lazy"
                                 decoding="async"
                                 width="400"
                                 height="300"
                                 onerror="this.style.display='none'" />
                        }
                        else
                        {
                            <div class="region-placeholder"><i class="bi bi-geo-alt"></i></div>
                        }
                    </div>
                    <div class="region-info-new">
                        <h3 class="region-name-new">@region.Name</h3>
                        <p class="region-route-new">@region.StartPoint → @region.Name</p>
                        <p class="region-price-new"><strong>@region.Price.ToString("N0") €</strong> Preise ab</p>
                        <a asp-controller="Home" asp-action="RegionDetail" asp-route-id="@region.Id" asp-route-lang="@currentLang" class="btn btn-region">
                            Jetzt buchen
                        </a>
                    </div>
                </div>
            }
        </div>
        
        <div class="section-footer" style="text-align: center; margin-top: 48px;">
            <a asp-controller="Home" asp-action="AllRegions" asp-route-lang="@currentLang" class="btn btn-outline">
                Alle Regionen anzeigen
                <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</section>
}

<!-- Services Detail Section -->
<section class="services-detail-section" style="content-visibility: auto;">
    <div class="services-detail-overlay"></div>
    <div class="container">
        <div class="services-detail-content">
            <span class="services-detail-ghost">DIENSTLEISTUNGEN</span>
            <h2 class="services-detail-title">UNSERE DIENSTLEISTUNGEN</h2>
            
            <div class="services-detail-text">
                <p class="services-intro" style="color: #ffffff;">
                    Wir bringen unsere geschätzten Gäste mit unseren speziell gestalteten VIP-Fahrzeugen vom Flughafen zu Ihrem Hotel, Ihrem Zuhause, Ihrer Villa oder jeder von Ihnen angegebenen Adresse. Außerdem bringen wir Sie zu Ihrer Wunschzeit an Ihren gewählten Ort.
                </p>
                
                <p class="services-desc" style="color: #ffffff;">
                    Unsere Mercedes Vito und Mercedes Sprinter Fahrzeuge verfügen über speziell gestaltete Innenräume und werden regelmäßig von autorisierten Servicestellen gewartet. Unser Ziel ist es, Ihnen eine komfortable, entspannte und sichere Fahrt zu Ihrem Ziel zu bieten. Sauberkeit und Hygiene unserer Fahrzeuge werden vor jeder Fahrt sorgfältig gewährleistet. Unsere Fahrer sind erfahrene, zuverlässige und freundliche Fachleute.
                </p>
                
                <p class="services-desc" style="color: #ffffff;">
                    Nach Ihrer Buchung verfolgen wir Ihren Flug sekundengenau anhand Ihrer Flugnummer. Wenn Ihr Flugzeug landet, wird unser Fahrer Sie mit einem Schild mit Ihrem Namen am Flughafenausgang begrüßen. Er wird Sie ohne Verzögerung zum Parkplatz begleiten und Sie sicher zu Ihrer Wunschadresse bringen. In unseren Fahrzeugen sind Internet, Speisen und Getränke kostenlos.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Trust Bar -->
<section class="trust-bar" style="content-visibility: auto; background: #ffffff !important;">
    <div class="container">
        <div class="trust-grid">
            <div class="trust-item">
                <i class="bi bi-patch-check-fill"></i>
                <span style="color: #0f172a; font-weight: 600;">Lizenzierter Service</span>
            </div>
            <div class="trust-item">
                <i class="bi bi-shield-check"></i>
                <span style="color: #0f172a; font-weight: 600;">Versicherte Reise</span>
            </div>
            <div class="trust-item">
                <i class="bi bi-clock-history"></i>
                <span style="color: #0f172a; font-weight: 600;">24/7 Support</span>
            </div>
            <div class="trust-item">
                <i class="bi bi-credit-card"></i>
                <span style="color: #0f172a; font-weight: 600;">Sichere Zahlung</span>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section class="section" style="content-visibility: auto;">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Unsere Dienstleistungen</span>
            <h2 class="section-title">Umfassende Transferlösungen</h2>
            <p class="section-description">
                Unternehmensmobilität nach Maß
            </p>
        </div>

        <div class="services-grid">
            <div class="service-card">
                <div class="service-icon">
                    <i class="bi bi-airplane"></i>
                </div>
                <h3>Flughafentransfer</h3>
                <p>VIP-Abholung von Istanbul, Sabiha Gökçen und allen Flughäfen. Flugverfolgung inklusive Verspätungen.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="bi bi-building"></i>
                </div>
                <h3>Hoteltransfer</h3>
                <p>Sicherer und komfortabler Transfer vom Hotel zum Flughafen oder zu Ihrem Wunschort.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="bi bi-briefcase"></i>
                </div>
                <h3>Geschäftslösungen</h3>
                <p>Spezieller Fuhrpark für Geschäftsreisen, Meetings und Firmenveranstaltungen.</p>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="bi bi-signpost-split"></i>
                </div>
                <h3>Überlandfahrten</h3>
                <p>Genießen Sie Komfort und Sicherheit bei Langstreckentransfers.</p>
            </div>
        </div>
    </div>
</section>

<!-- Vehicles Section -->
<section class="section section-gray" style="content-visibility: auto;">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Unsere Fahrzeugflotte</span>
            <h2 class="section-title">Unsere VIP Fahrzeuge</h2>
            <p class="section-description">
                Mit unseren Premium-Fahrzeugen machen wir Ihre Reisen exklusiv
            </p>
        </div>

        <div class="vehicles-grid">
            @foreach (var vehicle in Model.Vehicles)
            {
                var vehicleImgUrl = !string.IsNullOrEmpty(vehicle.ImageUrl)
                    ? vehicle.ImageUrl
                    : vehicle.Images?.OrderBy(i => i.SortOrder).FirstOrDefault()?.ImageUrl;
                var defaultImg = ViewBag.DefaultVehicleImage as string ?? "";
                if (string.IsNullOrEmpty(vehicleImgUrl) && !string.IsNullOrEmpty(defaultImg)) { vehicleImgUrl = defaultImg; }
                <div class="vehicle-card">
                    <div class="vehicle-image">
                        @if (!string.IsNullOrEmpty(vehicleImgUrl))
                        {
                            <img src="@vehicleImgUrl"
                                 alt="@vehicle.Name VIP Transfer Fahrzeug - @vehicle.Type"
                                 loading="lazy"
                                 decoding="async"
                                 width="400"
                                 height="300"
                                 onerror="this.onerror=null; this.src='@(defaultImg)';" />
                        }
                        else if (!string.IsNullOrEmpty(defaultImg))
                        {
                            <img src="@defaultImg" alt="@vehicle.Name" loading="lazy" width="400" height="300" />
                        }
                        <span class="vehicle-type">@vehicle.Type</span>
                    </div>
                    <div class="vehicle-info">
                        <h3>@vehicle.Name</h3>
                        <p>@vehicle.Description</p>
                        <div class="vehicle-specs">
                            <span><i class="bi bi-people"></i> @vehicle.PassengerCapacity Passagiere</span>
                            <span><i class="bi bi-briefcase"></i> @vehicle.LuggageCapacity Gepäckstücke</span>
                        </div>
                        <a asp-controller="Reservation" asp-action="Index" asp-route-lang="@currentLang" class="btn btn-primary btn-sm">
                            Jetzt buchen
                        </a>
                    </div>
                </div>
            }
        </div>

        <div class="section-footer" style="text-align: center; margin-top: 48px;">
            <a asp-controller="Vehicle" asp-action="Index" asp-route-lang="@currentLang" class="btn btn-outline">
                Alle Fahrzeuge anzeigen
                <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<!-- Gallery Section -->
@if (Model.GalleryImages.Any())
{
<section class="section section-gray" style="content-visibility: auto;">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Galerie</span>
            <h2 class="section-title">Zufriedene Kunden</h2>
            <p class="section-description">
                Impressionen unserer Dienstleistungen und Kundenerlebnisse
            </p>
        </div>
        
        <div class="gallery-grid">
            @foreach (var image in Model.GalleryImages)
            {
                <div class="gallery-item-home">
                    <img src="@image.ImageUrl" 
                         alt="@image.Title - Imperial VIP Transfer Galerie" 
                         loading="lazy"
                         decoding="async"
                         width="300"
                         height="300" />
                    <div class="gallery-item-overlay">
                        <i class="bi bi-zoom-in"></i>
                    </div>
                </div>
            }
        </div>
        
        <div class="section-footer" style="text-align: center; margin-top: 48px;">
            <a asp-controller="Home" asp-action="Galeri" asp-route-lang="@currentLang" class="btn btn-outline">
                Gesamte Galerie anzeigen
                <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</section>
}

<!-- Google Reviews Section -->
<section class="google-reviews-section" style="content-visibility: auto;">
    <div class="container">
        <div class="google-reviews-header">
            <h2><span class="text-google">Google Bewertungen</span> unserer Kunden</h2>
            <div class="google-rating">
                <span class="rating-score">5.0</span>
                <div class="rating-stars">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                </div>
                <span class="rating-count">22+ Bewertungen</span>
            </div>
            <a href="https://g.page/r/CbgXXXXXXXXXX" target="_blank" class="btn btn-google">
                <i class="bi bi-star-fill"></i>
                Bewerten Sie uns bei Google
                <i class="bi bi-arrow-up-right"></i>
            </a>
        </div>
        
        <div class="reviews-carousel-wrapper">
            <button class="reviews-nav reviews-nav-prev" id="reviewsPrev">
                <i class="bi bi-chevron-left"></i>
            </button>
            
            <div class="reviews-carousel" id="reviewsCarousel">
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">LH</div>
                        <div class="reviewer-info">
                            <span class="reviewer-name">Linda H***</span>
                            <span class="review-date">vor 3 Wochen</span>
                        </div>
                    </div>
                    <div class="review-stars">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="review-text">Guter Service und Kommunikation. Ich empfehle sie.</p>
                </div>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">FM</div>
                        <div class="reviewer-info">
                            <span class="reviewer-name">Fulya M***</span>
                            <span class="review-date">vor 1 Jahr</span>
                        </div>
                    </div>
                    <div class="review-stars">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="review-text">Eine Woche vor meinem Flug buchte ich einen VIP-Transfer vom Flughafen Antalya zu meinem Hotel in Olympos. Ich wählte Imperial VIP Transfer. Ein tolles Erlebnis!</p>
                </div>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">MT</div>
                        <div class="reviewer-info">
                            <span class="reviewer-name">Merve T***</span>
                            <span class="review-date">vor 1 Jahr</span>
                        </div>
                    </div>
                    <div class="review-stars">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="review-text">Wir buchten Imperial VIP für den Transfer vom Flughafen Antalya zu unserem Hotel in Manavgat. Wir suchten als Mädelsgruppe eine zuverlässige Firma – und haben sie gefunden!</p>
                </div>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">AK</div>
                        <div class="reviewer-info">
                            <span class="reviewer-name">Ahmet K***</span>
                            <span class="review-date">vor 2 Monaten</span>
                        </div>
                    </div>
                    <div class="review-stars">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="review-text">Sehr professionell und pünktlich. Der Fahrer war sehr höflich und hilfsbereit. Ich werde auf jeden Fall wieder buchen.</p>
                </div>
                
                <div class="review-card">
                    <div class="review-header">
                        <div class="reviewer-avatar">EY</div>
                        <div class="reviewer-info">
                            <span class="reviewer-name">Elif Y***</span>
                            <span class="review-date">vor 6 Monaten</span>
                        </div>
                    </div>
                    <div class="review-stars">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p class="review-text">Wir haben es als Familie genutzt und waren sehr zufrieden. Das Fahrzeug war makellos sauber, sogar ein Kindersitz war vorhanden. Vielen Dank Imperial VIP!</p>
                </div>
            </div>
            
            <button class="reviews-nav reviews-nav-next" id="reviewsNext">
                <i class="bi bi-chevron-right"></i>
            </button>
        </div>
        
        <div class="reviews-dots" id="reviewsDots">
            <button class="reviews-dot active" data-index="0"></button>
            <button class="reviews-dot" data-index="1"></button>
            <button class="reviews-dot" data-index="2"></button>
            <button class="reviews-dot" data-index="3"></button>
            <button class="reviews-dot" data-index="4"></button>
        </div>
    </div>
</section>

<!-- Why Choose Us Section -->
<section class="why-choose-section" style="content-visibility: auto;">
    <div class="container">
        <span class="why-choose-ghost">WARUM UNS WÄHLEN?</span>
        <h2 class="why-choose-title">WARUM UNS WÄHLEN?</h2>
        
        <div class="why-choose-grid">
            <div class="why-choose-card">
                <div class="why-choose-icon">
                    <i class="bi bi-hand-thumbs-up"></i>
                </div>
                <h3>Warum uns wählen?</h3>
                <p>Wir bieten einzigartigen Luxus, Komfort und Zuverlässigkeit. Unsere erfahrenen Fahrer sorgen für eine sorgenfreie Fahrt, während unser außergewöhnlicher Service uns von anderen unterscheidet.</p>
            </div>
            
            <div class="why-choose-card">
                <div class="why-choose-icon">
                    <i class="bi bi-star"></i>
                </div>
                <h3>Vorteile einer Buchung</h3>
                <p>Erleben Sie ein erstklassiges Reiseerlebnis mit Luxusfahrzeugen, professionellen Fahrern und personalisiertem Service nach Ihren Bedürfnissen.</p>
            </div>
            
            <div class="why-choose-card">
                <div class="why-choose-icon">
                    <i class="bi bi-calendar-check"></i>
                </div>
                <h3>Machen Sie Ihre Reise noch schöner</h3>
                <p>Überlassen Sie uns den Transport und genießen Sie Ihre Reise. Entspannen Sie sich und starten Sie ausgeruht in Ihr Abenteuer.</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta section" style="content-visibility: auto;">
    <div class="container">
        <div class="cta-content">
            <h2>Kontaktieren Sie uns für eine Buchung</h2>
            <p>
                Erstellen Sie jetzt Ihre Online-Buchung für ein VIP-Transfererlebnis 
                oder kontaktieren Sie uns sofort über WhatsApp.
            </p>
            <div class="cta-buttons">
                <a asp-controller="Reservation" asp-action="Index" asp-route-lang="@currentLang" class="btn btn-accent btn-lg">
                    <i class="bi bi-calendar-check"></i>
                    Online buchen
                </a>
                <a href="https://wa.me/905303471580" class="btn btn-whatsapp btn-lg" target="_blank">
                    <i class="bi bi-whatsapp"></i>
                    WhatsApp: +90 530 347 1580
                </a>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        (function() {
            var AIRPORT = 'Antalya Havalimanı';
            var regionsForForm = @Html.Raw(System.Text.Json.JsonSerializer.Serialize((Model.AllRegionsForForm ?? Model.Regions).Select(r => new { id = r.Id, name = r.Name }).ToList()));
            var pickupEl = document.getElementById('pickupLocation');
            var dropoffEl = document.getElementById('dropoffLocation');
            var regionIdEl = document.getElementById('quickFormRegionId');
            if (pickupEl && dropoffEl) {
                function fillDropoff() {
                    var pickupVal = pickupEl.value;
                    dropoffEl.innerHTML = '';
                    if (regionIdEl) regionIdEl.value = '';
                    if (!pickupVal) {
                        var opt0 = document.createElement('option');
                        opt0.value = '';
                        opt0.textContent = 'Zuerst Abholort wählen';
                        dropoffEl.appendChild(opt0);
                        return;
                    }
                    if (pickupVal === AIRPORT) {
                        var optPlaceholder = document.createElement('option');
                        optPlaceholder.value = '';
                        optPlaceholder.textContent = 'Region wählen';
                        dropoffEl.appendChild(optPlaceholder);
                        regionsForForm.forEach(function(r) {
                            var opt = document.createElement('option');
                            opt.value = r.name;
                            opt.setAttribute('data-region-id', r.id);
                            opt.textContent = r.name;
                            dropoffEl.appendChild(opt);
                        });
                    } else {
                        var regionOpt = pickupEl.options[pickupEl.selectedIndex];
                        var rid = regionOpt && regionOpt.getAttribute('data-region-id');
                        if (regionIdEl && rid) regionIdEl.value = rid;
                        var optAir = document.createElement('option');
                        optAir.value = AIRPORT;
                        optAir.textContent = 'Flughafen Antalya';
                        dropoffEl.appendChild(optAir);
                    }
                }
                pickupEl.addEventListener('change', fillDropoff);
                dropoffEl.addEventListener('change', function() {
                    var opt = dropoffEl.options[dropoffEl.selectedIndex];
                    var rid = opt && opt.getAttribute('data-region-id');
                    if (regionIdEl) regionIdEl.value = rid || regionIdEl.value;
                });
                fillDropoff();
            }
        })();
        document.addEventListener('DOMContentLoaded', function() {
            const lazySlides = document.querySelectorAll('.lazy-slide');
            if (lazySlides.length > 0) {
                setTimeout(function() {
                    lazySlides.forEach(function(img) {
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src');
                            img.classList.remove('lazy-slide');
                            img.parentElement.style.display = '';
                        }
                    });
                }, 1000);
            }
        });
    </script>
}
